# üß™ Property Edit - Comprehensive Test Plan

## Test Environment Setup
- **Date:** January 12, 2025
- **Browser:** Chrome/Edge (latest)
- **Test Property:** Select any existing property from Properties page
- **Expected Behavior:** All changes should save immediately and persist after page refresh

---

## ‚úÖ Test Checklist

### 1Ô∏è‚É£ **GENERAL TAB** - Property Details, Location, Communication, Access, Extras

#### **A. Property Basic Information**
- [ ] Change `property_name` ‚Üí Save ‚Üí Verify name updates
- [ ] Change `property_type` (dropdown) ‚Üí Save ‚Üí Verify type updates
- [ ] Toggle `is_active` checkbox ‚Üí Save ‚Üí Verify status changes
- [ ] Toggle `is_booking` checkbox ‚Üí Save ‚Üí Verify booking flag
- [ ] Toggle `is_pets_allowed` checkbox ‚Üí Save ‚Üí Verify pets flag
- [ ] Change `capacity` (number) ‚Üí Save ‚Üí Verify capacity updates
- [ ] Change `max_capacity` (number) ‚Üí Save ‚Üí Verify max capacity updates
- [ ] Change `size_sqf` (number) ‚Üí Save ‚Üí Verify size updates

**Expected:**
- ‚úÖ Yellow "Unsaved changes" warning appears on edit
- ‚úÖ Save button becomes enabled
- ‚úÖ Green "All changes saved" appears after save
- ‚úÖ Toast notification: "Property Saved Successfully"

#### **B. Room Configuration**
- [ ] Change `num_bedrooms` ‚Üí Save ‚Üí Verify count
- [ ] Change `num_bathrooms` ‚Üí Save ‚Üí Verify count
- [ ] Change `num_half_bath` ‚Üí Save ‚Üí Verify count
- [ ] Change `num_wcs` ‚Üí Save ‚Üí Verify count
- [ ] Change `num_kitchens` ‚Üí Save ‚Üí Verify count
- [ ] Change `num_living_rooms` ‚Üí Save ‚Üí Verify count

#### **C. Location Section**
- [ ] Change `address` ‚Üí Save ‚Üí Verify address updates
- [ ] Change `city` ‚Üí Save ‚Üí Verify city updates
- [ ] Change `state` ‚Üí Save ‚Üí Verify state updates
- [ ] Change `postal_code` ‚Üí Save ‚Üí Verify zip updates
- [ ] Change `latitude` ‚Üí Save ‚Üí Verify coordinates
- [ ] Change `longitude` ‚Üí Save ‚Üí Verify coordinates
- [ ] Click "View on Map" ‚Üí Verify map opens with correct location

#### **D. Communication Section**
- [ ] Change `phone_number` ‚Üí Save ‚Üí Verify phone updates
- [ ] Toggle "Show password" on WiFi ‚Üí Verify visibility toggle works
- [ ] Change `wifi_name` ‚Üí Save ‚Üí Verify WiFi name updates
- [ ] Change `wifi_password` ‚Üí Save ‚Üí Verify WiFi password updates

#### **E. Access Codes Section**
- [ ] Change `gate_code` ‚Üí Save ‚Üí Verify gate code updates
- [ ] Change `door_lock_password` ‚Üí Save ‚Üí Verify door lock updates
- [ ] Change `alarm_passcode` ‚Üí Save ‚Üí Verify alarm code updates
- [ ] Toggle password visibility ‚Üí Verify all codes can be shown/hidden

#### **F. Extras Section**
- [ ] Change `storage_number` ‚Üí Save ‚Üí Verify storage# updates
- [ ] Change `storage_code` ‚Üí Save ‚Üí Verify storage code updates
- [ ] Change `front_desk` ‚Üí Save ‚Üí Verify front desk info updates
- [ ] Change `garage_number` ‚Üí Save ‚Üí Verify garage# updates
- [ ] Change `mailing_box` ‚Üí Save ‚Üí Verify mailbox# updates
- [ ] Change `pool_access_code` ‚Üí Save ‚Üí Verify pool code updates

**Validation Tests:**
- [ ] Try saving with `capacity > max_capacity` ‚Üí Verify validation error
- [ ] Try saving with negative numbers ‚Üí Verify validation error
- [ ] Try saving with empty required fields ‚Üí Verify validation error

---

### 2Ô∏è‚É£ **PROVIDERS TAB** - Utility & Service Providers

#### **Add Provider Test**
- [ ] Click "Add Provider" button
- [ ] Fill in provider name (e.g., "FPL Electric")
- [ ] Select provider type (e.g., "Electric")
- [ ] Fill in phone number
- [ ] Fill in account number
- [ ] Fill in billing name
- [ ] Fill in website URL
- [ ] Add observations/notes
- [ ] Click Save ‚Üí Verify provider appears in table

#### **Edit Provider Test**
- [ ] Click Edit icon on existing provider
- [ ] Modify provider name
- [ ] Change phone number
- [ ] Click Save ‚Üí Verify changes persist

#### **Delete Provider Test**
- [ ] Click Delete icon on a provider
- [ ] Confirm deletion in dialog
- [ ] Verify provider is removed from table

#### **Search/Filter Test**
- [ ] Type in search box ‚Üí Verify filtering works
- [ ] Search by name ‚Üí Verify results
- [ ] Search by type ‚Üí Verify results
- [ ] Search by phone ‚Üí Verify results

**Expected:**
- ‚úÖ Table view with all provider details
- ‚úÖ Icons match provider type (‚ö° Electric, üì° Internet, etc.)
- ‚úÖ Toast notifications for all CRUD operations

---

### 3Ô∏è‚É£ **UNIT OWNERS TAB** - Property Owners Management

#### **Add Owner Test**
- [ ] Click "Add Owner" button
- [ ] Fill in first name & last name
- [ ] Fill in email (must be valid)
- [ ] Select relationship to main owner
- [ ] Fill in primary phone
- [ ] Fill in USA phone
- [ ] Fill in WhatsApp
- [ ] Toggle "Primary Owner" if applicable
- [ ] Click Save ‚Üí Verify owner appears in table

#### **Edit Owner Test**
- [ ] Click Edit icon on existing owner
- [ ] Modify contact information
- [ ] Click Save ‚Üí Verify changes persist

#### **Delete Owner Test**
- [ ] Try to delete primary owner ‚Üí Verify deletion is blocked
- [ ] Click Delete icon on non-primary owner
- [ ] Confirm deletion
- [ ] Verify owner is removed

#### **Search Test**
- [ ] Type in search box ‚Üí Verify filtering works

**Expected:**
- ‚úÖ Primary owner badge displayed
- ‚úÖ Cannot delete primary owner
- ‚úÖ Phone numbers formatted correctly
- ‚úÖ Relationship badges shown

---

### 4Ô∏è‚É£ **VEHICLES TAB** - Registered Vehicles

#### **Add Vehicle Test**
- [ ] Click "Add Vehicle" button
- [ ] Fill in year
- [ ] Fill in make
- [ ] Fill in model
- [ ] Fill in color
- [ ] Fill in license plate
- [ ] Fill in owner name
- [ ] Fill in VIN
- [ ] Add registration info
- [ ] Add insurance info
- [ ] Click Save ‚Üí Verify vehicle appears in table

#### **Edit Vehicle Test**
- [ ] Click Edit icon
- [ ] Modify vehicle details
- [ ] Click Save ‚Üí Verify changes persist

#### **Delete Vehicle Test**
- [ ] Click Delete icon
- [ ] Confirm deletion
- [ ] Verify vehicle is removed

#### **Search Test**
- [ ] Search by license plate ‚Üí Verify filtering

**Expected:**
- ‚úÖ Vehicle display shows year + make + model
- ‚úÖ License plate shown as badge
- ‚úÖ Registration/Insurance badges with tooltips

---

### 5Ô∏è‚É£ **PHOTOS TAB** - Property Images

#### **Upload Photo Test**
- [ ] Click upload area or "Choose Files"
- [ ] Select image(s) from computer
- [ ] Verify upload progress
- [ ] Verify images appear in gallery

#### **Set Primary Image Test**
- [ ] Click "Set as Primary" on an image
- [ ] Verify primary badge appears

#### **Delete Photo Test**
- [ ] Click delete icon on image
- [ ] Confirm deletion
- [ ] Verify image is removed

#### **View Full Size Test**
- [ ] Click on image thumbnail
- [ ] Verify lightbox/modal opens
- [ ] Verify image loads in full size

**Expected:**
- ‚úÖ Drag & drop upload works
- ‚úÖ Image thumbnails load quickly
- ‚úÖ Primary image badge displayed
- ‚úÖ Lightbox navigation works

---

### 6Ô∏è‚É£ **QR CODE TAB** - Property QR Code

#### **QR Code Display Test**
- [ ] Verify QR code is displayed
- [ ] Verify property information shown below QR
- [ ] Scan QR code with phone ‚Üí Verify it links to property

#### **Download QR Code Test**
- [ ] Click "Download QR Code" button
- [ ] Verify PNG file downloads
- [ ] Verify downloaded file is valid

#### **Print QR Code Test**
- [ ] Click "Print QR Code" button
- [ ] Verify print dialog opens
- [ ] Verify QR code prints correctly

**Expected:**
- ‚úÖ QR code is scannable
- ‚úÖ QR contains property URL or info
- ‚úÖ Download works in PNG format

---

### 7Ô∏è‚É£ **FINANCIAL TAB** - Financial Entries

#### **Add Financial Entry Test**
- [ ] Click "Add Entry" button
- [ ] Fill in description
- [ ] Select entry type (Income/Expense)
- [ ] Fill in amount
- [ ] Select entry date
- [ ] Add notes
- [ ] Click Save ‚Üí Verify entry appears in list

#### **Edit Financial Entry Test**
- [ ] Click Edit icon
- [ ] Modify amount or description
- [ ] Click Save ‚Üí Verify changes persist

#### **Delete Financial Entry Test**
- [ ] Click Delete icon
- [ ] Confirm deletion
- [ ] Verify entry is removed

#### **Balance Calculation Test**
- [ ] Add income entry ‚Üí Verify balance increases
- [ ] Add expense entry ‚Üí Verify balance decreases
- [ ] Verify running balance is accurate

**Expected:**
- ‚úÖ Income shows as green/positive
- ‚úÖ Expenses show as red/negative
- ‚úÖ Balance calculates correctly
- ‚úÖ Date picker works

---

### 8Ô∏è‚É£ **CHECKLISTS TAB** - Task Checklists

#### **Create Checklist Test**
- [ ] Click "Create Checklist" button
- [ ] Fill in checklist name
- [ ] Add description
- [ ] Set priority level
- [ ] Set due date
- [ ] Assign to user
- [ ] Click Save ‚Üí Verify checklist appears

#### **Add Checklist Items Test**
- [ ] Click on checklist
- [ ] Add multiple checklist items
- [ ] Verify items appear

#### **Complete Checklist Items Test**
- [ ] Check off items one by one
- [ ] Verify progress bar updates
- [ ] Verify completion percentage

#### **Delete Checklist Test**
- [ ] Click Delete icon
- [ ] Confirm deletion
- [ ] Verify checklist is removed

**Expected:**
- ‚úÖ Progress bar shows completion %
- ‚úÖ Priority badges displayed
- ‚úÖ Due date warnings for overdue items

---

### 9Ô∏è‚É£ **BOOKING TAB** - Bookings & Rates

#### **Add Booking Test**
- [ ] Click "Add Booking" button
- [ ] Fill in guest name
- [ ] Fill in guest email
- [ ] Fill in guest phone
- [ ] Select check-in date
- [ ] Select check-out date
- [ ] Fill in number of guests
- [ ] Select payment method
- [ ] Fill in total amount
- [ ] Add special requests
- [ ] Click Save ‚Üí Verify booking appears

#### **Booking Rates Test**
- [ ] Fill in low season rate
- [ ] Fill in medium season rate
- [ ] Fill in high season rate
- [ ] Fill in holiday rate
- [ ] Fill in extra guest price
- [ ] Fill in PM commission %
- [ ] Toggle payment methods (Cash, Card, Stripe)
- [ ] Click Save ‚Üí Verify rates persist

#### **Edit Booking Test**
- [ ] Click Edit icon on booking
- [ ] Modify dates or guest info
- [ ] Click Save ‚Üí Verify changes persist

#### **Cancel Booking Test**
- [ ] Change booking status to "Cancelled"
- [ ] Verify status badge updates

**Expected:**
- ‚úÖ Date picker prevents past dates
- ‚úÖ Check-out must be after check-in
- ‚úÖ Booking status badges colored correctly
- ‚úÖ Calendar view shows bookings

---

### üîü **NOTES TAB** - Property Notes

#### **Add Note Test**
- [ ] Click "Add Note" button
- [ ] Fill in note title
- [ ] Fill in note content (rich text if available)
- [ ] Click Save ‚Üí Verify note appears

#### **Edit Note Test**
- [ ] Click Edit icon on note
- [ ] Modify title or content
- [ ] Click Save ‚Üí Verify changes persist

#### **Delete Note Test**
- [ ] Click Delete icon
- [ ] Confirm deletion
- [ ] Verify note is removed

#### **Search Notes Test**
- [ ] Type in search box
- [ ] Verify filtering by title/content

**Expected:**
- ‚úÖ Notes sorted by date (newest first)
- ‚úÖ Timestamps shown
- ‚úÖ User who created note shown

---

## üîÑ **CROSS-TAB TESTS**

### Tab Switching with Unsaved Changes
- [ ] Edit General tab data (don't save)
- [ ] Try to switch to Providers tab
- [ ] Verify warning dialog appears
- [ ] Click "Cancel" ‚Üí Verify stays on General tab
- [ ] Click "Leave" ‚Üí Verify switches without saving

### Data Persistence Test
- [ ] Make changes in General tab ‚Üí Save
- [ ] Switch to another tab
- [ ] Switch back to General tab
- [ ] Verify all saved data is still there

### Refresh Test
- [ ] Make changes and save
- [ ] Hard refresh browser (Ctrl+Shift+R)
- [ ] Navigate back to property edit
- [ ] Verify all changes persisted

---

## üêõ **ERROR HANDLING TESTS**

### Network Error Test
- [ ] Disconnect internet
- [ ] Try to save ‚Üí Verify error message shown
- [ ] Reconnect internet
- [ ] Retry save ‚Üí Verify success

### Invalid Data Test
- [ ] Enter invalid email in Owners tab
- [ ] Try to save ‚Üí Verify validation error
- [ ] Enter text in number fields
- [ ] Verify validation prevents save

### Permission Test
- [ ] Log out and log in as non-admin user (if available)
- [ ] Try to edit property
- [ ] Verify appropriate permissions applied

---

## üìä **PERFORMANCE TESTS**

- [ ] Load property with 100+ images ‚Üí Verify page loads within 3 seconds
- [ ] Load property with 50+ financial entries ‚Üí Verify no lag
- [ ] Switch between tabs quickly ‚Üí Verify no memory leaks
- [ ] Leave page open for 10 minutes ‚Üí Verify no auto-refetching

---

## ‚úÖ **SUCCESS CRITERIA**

All tests should meet these criteria:
- ‚úÖ No console errors
- ‚úÖ Changes persist after save
- ‚úÖ Changes persist after page refresh
- ‚úÖ Toast notifications appear for all actions
- ‚úÖ Loading states show during operations
- ‚úÖ Validation errors are clear and helpful
- ‚úÖ No infinite loading states
- ‚úÖ No memory leaks or performance degradation

---

## üéØ **TEST RESULTS**

**Date Tested:** __________________
**Tested By:** __________________
**Browser:** __________________
**Test Duration:** __________________

**Tabs Tested:**
- [ ] General Tab: ‚úÖ Pass / ‚ùå Fail
- [ ] Providers Tab: ‚úÖ Pass / ‚ùå Fail
- [ ] Owners Tab: ‚úÖ Pass / ‚ùå Fail
- [ ] Vehicles Tab: ‚úÖ Pass / ‚ùå Fail
- [ ] Photos Tab: ‚úÖ Pass / ‚ùå Fail
- [ ] QR Code Tab: ‚úÖ Pass / ‚ùå Fail
- [ ] Financial Tab: ‚úÖ Pass / ‚ùå Fail
- [ ] Checklists Tab: ‚úÖ Pass / ‚ùå Fail
- [ ] Booking Tab: ‚úÖ Pass / ‚ùå Fail
- [ ] Notes Tab: ‚úÖ Pass / ‚ùå Fail

**Issues Found:**
1. _________________________________________________
2. _________________________________________________
3. _________________________________________________

**Overall Status:** ‚úÖ PASS / ‚ùå FAIL / ‚ö†Ô∏è PARTIAL
